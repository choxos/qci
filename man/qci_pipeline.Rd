% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pipeline.R
\name{qci_pipeline}
\alias{qci_pipeline}
\title{Run the complete QCI pipeline}
\usage{
qci_pipeline(
  data,
  loc_types = NULL,
  keep_types = "Country",
  age_categories = "Age-standardized",
  exclude_location_ids = 533L,
  ratio_cols = c("MIR", "YLLtoYLD", "DALtoPER", "PERtoINC"),
  verbose = TRUE
)
}
\arguments{
\item{data}{A data.frame of raw GBD data. If a character vector of
file paths, \code{\link[=qci_load]{qci_load()}} is called first.}

\item{loc_types}{Location type metadata. \code{NULL} uses the bundled dataset.}

\item{keep_types}{Character vector of location types.
Default \code{"Country"}.}

\item{age_categories}{Character vector of age groups.
Default \code{"Age-standardized"}.}

\item{exclude_location_ids}{Integer vector. Default \code{533}.}

\item{ratio_cols}{Character vector of ratio column names for PCA.
Default \code{c("MIR", "YLLtoYLD", "DALtoPER", "PERtoINC")}.}

\item{verbose}{Logical. Print progress messages. Default \code{TRUE}.}
}
\value{
A list with elements:
\describe{
\item{wide}{data.table in wide format. Contains Rate columns, Number
columns (suffixed \verb{_Number}), the 4 ratios, and \code{qci_score}.}
\item{long}{data.table in long format with columns: location_id,
location_name, year, sex_name, age_name, measure, value, upper,
lower.}
\item{pca_details}{data.frame of variance explained per subgroup.}
}
}
\description{
A convenience function that chains all processing steps:
load (optional) -> clean -> compute ratios -> PCA -> merge with
Rate data -> create long format output.
}
\details{
This is the primary user-facing function for computing QCI from raw
GBD data.
}
\examples{
data(sample_gbd)
result <- qci_pipeline(sample_gbd)
head(result$wide[, .(location_name, year, sex_name, qci_score)])
}
